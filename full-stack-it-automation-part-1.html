<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Livio&#39;s Dump RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Livio&#39;s Dump Atom Feed"><title data-rh="true">Full-Stack Automation Part 1 - Overview | Livio&#x27;s Dump</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://livio.zanol.com.br/full-stack-it-automation-part-1"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Full-Stack Automation Part 1 - Overview | Livio&#x27;s Dump"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-12-01T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/liviozanol"><meta data-rh="true" property="article:tag" content="automation,awx,ansible,gitlab,network automation,gitops,CI/CD,ops pipeline"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://livio.zanol.com.br/full-stack-it-automation-part-1"><link data-rh="true" rel="alternate" href="https://livio.zanol.com.br/full-stack-it-automation-part-1" hreflang="en"><link data-rh="true" rel="alternate" href="https://livio.zanol.com.br/full-stack-it-automation-part-1" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.bd4424da.css">
<link rel="preload" href="/assets/js/runtime~main.fd840988.js" as="script">
<link rel="preload" href="/assets/js/main.75488faf.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/lzp-small.svg" alt="Logo" class="themedImage_W2Cr themedImage--light_TfLj" height="32" width="32"><img src="/img/lzp-small.svg" alt="Logo" class="themedImage_W2Cr themedImage--dark_oUvU" height="32" width="32"></div><b class="navbar__title text--truncate">Livio&#x27;s Dump</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">All Blog Posts</a><a href="https://github.com/liviozanol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="mailto:livio@zanol.com.br" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">E-mail: livio@zanol.com.br<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_TMXw thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_V4zb margin-bottom--md">All posts</div><ul class="sidebarItemList_uHd5 clean-list"><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/non-contiguous-netmasks">Non-contiguous Netmasks</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/vmware-vds-traffic-filter">Using vSphere Distributed Switch (VDS) for stateless &quot;traffic filtering&quot; (or ACL)</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/full-stack-it-automation-part-11">Full-Stack Automation Part 11 - Conclusions</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/full-stack-it-automation-part-10-demo-ui">Full-Stack Automation Part 10 - Demo - UI</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/full-stack-it-automation-part-9-demo-api">Full-Stack Automation Part 9 - Demo - API</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/full-stack-it-automation-part-8-demo-gitlab-runner">Full-Stack Automation Part 8 - Demo - Runner</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/full-stack-it-automation-part-7-demo-awx">Full-Stack Automation Part 7 - Demo - AWX</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/full-stack-it-automation-part-6-demo-scenario">Full-Stack Automation Part 6 - Demo -Scenario</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/full-stack-it-automation-part-5-gitlabci">Full-Stack Automation Part 5 - Gitlab CI</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/full-stack-it-automation-part-4-awx">Full-Stack Automation Part 4 - AWX</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/full-stack-it-automation-part-3-Vault">Full-Stack Automation Part 3 - Vault</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/full-stack-it-automation-part-2-gitlab">Full-Stack Automation Part 2 - Gitlab</a></li><li class="sidebarItem_spIe"><a aria-current="page" class="sidebarItemLink_eqrF sidebarItemLinkActive_XZSJ" href="/full-stack-it-automation-part-1">Full-Stack Automation Part 1 - Overview</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/first">First Post</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">Full-Stack Automation Part 1 - Overview</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2021-12-01T00:00:00.000Z" itemprop="datePublished">December 1, 2021</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/liviozanol" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/liviozanol.png" alt="Lívio Zanol Puppim"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/liviozanol" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Lívio Zanol Puppim</span></a></div><small class="avatar__subtitle" itemprop="description">Me</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_mojV" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><p>So, this is the first post on a series of automation posts that will demonstrate how to build a Full-Stack automation. In fact it can be used to automate any service, but we&#x27;ll focus and use network as an example.</p><p>This first post will cover the idea of the solution, its architecture, components and other useful information. I&#x27;ll try my best to not use marketing or specific definitions like SD-WAN, SDN, SaaS, IaaS, etc.</p><p>First of all, let&#x27;s be clear about what is considered &quot;full-stack automation&quot; regarding this series of posts. Full-stack automation is referred as a solution/architecture to fully automate network (or any other services), beginning on the automation itself (eg.: playbooks that will run commands on a Automated Resource) all the way up to a structured data source using gitlab, an API and a WEB interface to be used by final users of the solution.</p><p>After building all this architecture, users should be able to access a page, input some information/value in it (eg.: routes, acls, interfaces IP address, etc.) and watch it being deployed by ansible on a Automated Resource (eg.: router)</p><p><img loading="lazy" alt="Full-stack Auto GIF" src="/assets/images/full-auto-ce636b1d21e492560d669907a05839ea.gif" width="983" height="434" class="img_E7b_"></p><p><strong>If you are on a hurry and don&#x27;t want to read further, the installation scripts and demo can be found in this repository</strong>: <a href="https://github.com/liviozanol/full-stack_automation" target="_blank" rel="noopener noreferrer">https://github.com/liviozanol/full-stack_automation</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="the-architecture">The Architecture<a class="hash-link" href="#the-architecture" title="Direct link to heading">​</a></h2><p>The architecture presented in this series of posts, which is shown below, is intended to be agnostic of manufacturer and cover any service automation, in a structured, secure and scalable way. Each piece was thought of in a way that can be exchanged by another solution with little/no adjustment on other pieces. You could change gitlab for files, change hashicorp vault for ansible secrets, change the API programming language to any other that you want, change the web user interface for other you want.</p><p><img loading="lazy" alt="Architecture of Full-Stack Automation" src="/assets/images/architecture_dark-1cfd6a6e36d1fd3337b3a6240a0f2217.svg" width="627" height="242" class="img_E7b_"></p><p><strong>This series of posts will detail every layer/element of the architecture, also providing a guide on how to install and configure each one of them. In the end you should have a complete functional Full-Stack Automation solution based on this architecture and also a demo.</strong></p><p>Description of each element/layer:</p><ul><li><p>The web interface will provide a friendly interface to users where they can list, create, update or delete data from a browser.</p></li><li><p>The API will provide a single point of contact for all automation and is responsible to receive user requests on data modifications (eg.: change network interface ip address), validate the data and send it to gitlab.</p></li><li><p>Gitlab is used as a place to store structured data from users (like a database), and also ansible playbooks.</p></li><li><p>Gitlab-CI/Runner will listen for data modifications on gitlab and call AWX to execute playbooks.</p></li><li><p>AWX/ansible will execute playbooks to implement the data modified by users in Automated Resources.</p></li><li><p>Hashicorp Vault will store key/pass to access Automated Resources and also key/pass to interact between elements (git lab token, etc.).</p></li><li><p>Automated Resource is a piece of infrastructure that provides some IT service. It can be a router/switch, a firewall, a hypervisor (eg.: vmware vsphere, openstack), a virtual machine, a container, etc. A router will be used as an example. Since we are using ansible, almost anything can be automated. You can even manage a terraform deployment to extend it even further (<a href="https://docs.ansible.com/ansible/latest/collections/community/general/terraform_module.html" target="_blank" rel="noopener noreferrer">https://docs.ansible.com/ansible/latest/collections/community/general/terraform_module.html</a>)! The resource is <em>only accessed by ansible</em> and using credentials stored in a specific Hashicorp Vault. You can also use other middle/tunnel/bastion infrastructure to access the Automated Resource through ansible, like a SSH tunnel.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="why-use-archtecture">Why/When to use Full-Stack Automation?<a class="hash-link" href="#why-use-archtecture" title="Direct link to heading">​</a></h2><p>When you have services/functions that needs to be used by final users to manage a provided infrastructure by you. Examples:</p><ul><li><p>You are a cloud provider and your users needs a portal/API/console/terraform module to manage the infrastructure you provide (just like current cloud providers: AWS, Azure, Google Cloud, Digital Ocean, etc.);</p></li><li><p>You are a service provider and you want(or need) that your users be able to change some configurations remotely for the provided infrastructured using a portal/API. (eg.: create ACLs on a remote CPE router you provide for them)</p></li><li><p>You have an operation team and you want to provide a portal/API to operators to provise or change infrastructure. (eg.: install and manage CPEs on a WAN network)</p></li><li><p>You just want to test the architecture or learn more about automation.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="why-not-use-archtecture">Why/When <em>NOT</em> use Full-Stack Automation?<a class="hash-link" href="#why-not-use-archtecture" title="Direct link to heading">​</a></h2><p>When you don&#x27;t need/want to provide infrastructure services in a self-service manner to the end user or When you have a small team that can manage the infrastructure directly.</p><p>Either way, the architecture designed can also be used for any cases on any element. You can, for example, just provide access to gitlab files and let your technical team modify direct information (a.k.a gitops) and leverage on the CI/CD + AWX solutions to implement it on your infrastructure. You can also provide direct access to AWX so operators just complete a web form (like a normal AWX use).</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="automation-scenario">Automation Scenario Used<a class="hash-link" href="#automation-scenario" title="Direct link to heading">​</a></h2><p>We will use a scenario as an example to implement a demo for the Full-Stack Automation architecture described here.</p><p>Assertions:</p><p>You work on a network service provider that serves WAN connections to several clients.</p><p>The network topology has CPEs (routers installed on clients premises) for every remote site that is connected to the provider network and that router connects each client site LAN to your transport network. You are required to allow clients to modify some configurations on these CPEs.</p><ul><li><p>Clients should be able to change configuration for all CPEs installed on their remote sites.</p></li><li><p>Clients must only modify configuration for the LAN interface of CPEs.</p></li><li><p>Clients should be able to modify configuration for interface description, interface IP address/subnet, interface ACLs and helper address/dhcp relay (DHCP server address).</p></li><li><p>Clients should be able to access a web page to make modifications. They should be able to also do these actions through an API.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="system-requirements">System Requirements<a class="hash-link" href="#system-requirements" title="Direct link to heading">​</a></h2><p>The simulated architecture will run on a single machine. In a production environment you may need to adjust it by separating elements in different secure segments and adding one or more pieces of softwares as needed.</p><p>Since it&#x27;s on a single machine you&#x27;ll need some good amount of <strong>FREE</strong> RAM memory (around 8GB), around 20GB of free disk space and a decent CPU. Since this is a demo, you have the option to use gitlab.com (or other gitlab) instead of intalling one and save about 3-4GB of RAM, be needs to adjust the steps/scripts.</p><p>It&#x27;ll be used docker-compose and some custom scripts to build the solution. You could install it using pure docker or kubernetes, adjusting scripts and files, of course.</p><p>You can run the scripts on a VM using a virtual box, another hypervisor (vmware, &#x27;aws&#x27;, openstack, etc) or use WSL on windows (which is also a VM by the way). Running the demo on a VM is a nice option.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/automation">automation</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/awx">awx</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/ansible">ansible</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/gitlab">gitlab</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/network-automation">network automation</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/gitops">gitops</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/ci-cd">CI/CD</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/ops-pipeline">ops pipeline</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/liviozanol/liviozanol.github.io/blog/2021-12-01-automation-1/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/full-stack-it-automation-part-2-gitlab"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Full-Stack Automation Part 2 - Gitlab</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/first"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">First Post</div></a></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#the-architecture" class="table-of-contents__link toc-highlight">The Architecture</a></li><li><a href="#why-use-archtecture" class="table-of-contents__link toc-highlight">Why/When to use Full-Stack Automation?</a></li><li><a href="#why-not-use-archtecture" class="table-of-contents__link toc-highlight">Why/When <em>NOT</em> use Full-Stack Automation?</a></li><li><a href="#automation-scenario" class="table-of-contents__link toc-highlight">Automation Scenario Used</a></li><li><a href="#system-requirements" class="table-of-contents__link toc-highlight">System Requirements</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Livio Zanol Puppim (livio@zanol.com.br). Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fd840988.js"></script>
<script src="/assets/js/main.75488faf.js"></script>
</body>
</html>