<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Livio&#39;s Dump RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Livio&#39;s Dump Atom Feed"><title data-react-helmet="true">Full-Stack Automation Part 7 - Demo - AWX | Livio&#x27;s Dump</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://liviozanol.github.io./full-stack-it-automation-part-7-demo-awx"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Full-Stack Automation Part 7 - Demo - AWX | Livio&#x27;s Dump"><meta data-react-helmet="true" name="description" content="Creating Playbooks and complements"><meta data-react-helmet="true" property="og:description" content="Creating Playbooks and complements"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2022-01-10T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/liviozanol"><meta data-react-helmet="true" property="article:tag" content="automation,awx,ansible,gitlab,network automation,gitlab-ci,CI/CD,gitops"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://liviozanol.github.io./full-stack-it-automation-part-7-demo-awx"><link data-react-helmet="true" rel="alternate" href="https://liviozanol.github.io./full-stack-it-automation-part-7-demo-awx" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://liviozanol.github.io./full-stack-it-automation-part-7-demo-awx" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.72c6fd0a.css">
<link rel="preload" href="/assets/js/runtime~main.df9db110.js" as="script">
<link rel="preload" href="/assets/js/main.c157b536.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/lzp-small.svg" alt="Logo" class="themedImage_TMUO themedImage--light_4Vu1" height="32" width="32"><img src="/img/lzp-small.svg" alt="Logo" class="themedImage_TMUO themedImage--dark_uzRr" height="32" width="32"></div><b class="navbar__title">Livio&#x27;s Dump</b></a><a href="https://github.com/liviozanol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="mailto:livio@zanol.com.br" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>E-mail: livio@zanol.com.br<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">All posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-10-demo-ui">Full-Stack Automation Part 10 - Demo - UI</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-9-demo-api">Full-Stack Automation Part 9 - Demo - API</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-8-demo-gitlab-runner">Full-Stack Automation Part 8 - Demo - Runner</a></li><li class="sidebarItem_cjdF"><a aria-current="page" class="sidebarItemLink_zyXk sidebarItemLinkActive_wcJs" href="/full-stack-it-automation-part-7-demo-awx">Full-Stack Automation Part 7 - Demo - AWX</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-6-demo-scenario">Full-Stack Automation Part 6 - Demo -Scenario</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-5-gitlabci">Full-Stack Automation Part 5 - Gitlab CI</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-4-awx">Full-Stack Automation Part 4 - AWX</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-3-Vault">Full-Stack Automation Part 3 - Vault</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-2-gitlab">Full-Stack Automation Part 2 - Gitlab</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-1">Full-Stack Automation Part 1 - Overview</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/first">First Post</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Full-Stack Automation Part 7 - Demo - AWX</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-01-10T00:00:00.000Z" itemprop="datePublished">January 10, 2022</time> Â· <!-- -->11 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://github.com/liviozanol" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://github.com/liviozanol.png" alt="LÃ­vio Zanol Puppim"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/liviozanol" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">LÃ­vio Zanol Puppim</span></a></div><small class="avatar__subtitle" itemprop="description">Me</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="creating-playbooks-and-complements">Creating Playbooks and complements<a aria-hidden="true" class="hash-link" href="#creating-playbooks-and-complements" title="Direct link to heading">â€‹</a></h2><p>In the previous post we have defined our structured data and created sample projects on gitlab. Now that our data structure is defined we can start to build our playbooks and templates. In this section we&#x27;ll build our inventory, templates, workflow and playbook.</p><p>All files generated on this section (and on previous) are on full-stack automation github repo (<a href="https://github.com/liviozanol/full-stack-automation" target="_blank" rel="noopener noreferrer">https://github.com/liviozanol/full-stack-automation</a>), so you don&#x27;t need to create it yourself again.</p><p>Ansible/AWX are only the executor of automation tasks and they are never accessed by end-users. So, we don&#x27;t need to have separation/segregation on a client basis on AWX and you don&#x27;t need to carry about this. More information about AWX and its role on this architecture can be found <a href="/full-stack-it-automation-part-4-awx">here</a></p><p>Everytime our gitlab repository is changed, gitlab-ci will get the contents of our wan_site_cfg.json file and send it to AWX as a variable, calling a job/playbook/template or a workflow that will implement the changes on our equipments.</p><p>After configuring AWX, you should be able to start jobs on it to implement changes on remote WAN sites.</p><p>Every file for AWX config to our demo can be found <a href="https://github.com/liviozanol/full-stack_automation/tree/master/demo/awx" target="_blank" rel="noopener noreferrer">here</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="inventory">Inventory<a aria-hidden="true" class="hash-link" href="#inventory" title="Direct link to heading">â€‹</a></h2><p>On AWX, you can have different inventories for each Project. Considering this, let&#x27;s define our project being our service in a way that for each service we can have different jobs/playbooks, templates and inventories. You could also use any separation you like (per your company technical areas - good for permission control, per element types, per automation types, etc.).</p><p>If you need to use some kind of jump/bastion host to access your devices, you can also define it on this file with variables for all hosts, group of hosts or single hosts. You don&#x27;t need to (and shouldn&#x27;t) keep a password/key for the SSH access here, you can just point to a place where the key will be and get it from hashicorp vault. <a href="https://docs.ansible.com/ansible/latest/reference_appendices/faq.html#how-do-i-configure-a-jump-host-to-access-servers-that-i-have-no-direct-access-to" target="_blank" rel="noopener noreferrer">read more</a></p><p>Since we&#x27;ll be using a lot of YAML I think it&#x27;s nice to build the inventory also using YAML, but feel free to use INI as well looking at <a href="https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html" target="_blank" rel="noopener noreferrer">reference guide</a>.</p><p>Our YAML for this wan_site automation project can be like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">all</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">vars</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">dumb_var</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> you_can_have_you_global_var_here_including_ssh_args</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ansible_user</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> test </span><span class="token comment" style="color:#999988;font-style:italic">#ansible SSH user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ansible_ssh_common_args</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;-o ControlPersist=60s -o ConnectTimeout=300 -o StrictHostKeyChecking=no&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#just to test... on production, remove this</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ansible_ssh_private_key_file</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./id_rsa_fullstack.key </span><span class="token comment" style="color:#999988;font-style:italic">#Key to use to login</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">children</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ROUTERS_US</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">vars</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">dumb_var2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> you_can_have_you_group_var_here_including_ssh_args</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">hosts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">site_1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">vars</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">dumb_var3</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> you_can_have_you_host_var_here_including_ssh_args</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.66 </span><span class="token comment" style="color:#999988;font-style:italic">#device IP that accepts SSH from ansible (or from bastion/jump host)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2222</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">#SSH listenport</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_connection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> network_cli </span><span class="token comment" style="color:#999988;font-style:italic">#ansible connection type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_network_os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ios </span><span class="token comment" style="color:#999988;font-style:italic">#variable with device OS that can be used later on our playbook to convert a propper template file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">site_3</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10322</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_connection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> network_cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_network_os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> junos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ROUTERS_ASIA</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">hosts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">site_2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10222</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_connection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> network_cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_network_os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> eos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">site_4</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_host</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_port</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10422</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_connection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> network_cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ansible_network_os</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> iosxr</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In our example inventory files, remote sites are separated by geographical area, but you can use any separation you want. You can even have a global inventory file maintained by another team that is updated on gitlab by an ansible playbook itself (imagine an initial deploy phase).</p><p>The important thing to note here is that the &quot;hosts&quot; names are the ones used to identify on which host jobs/playbooks need to be executed. So, in our demo, <em>hosts names on inventory (e.g.: site_1) must match the project name on gitlab</em>. You could use a field on the structured data (or another file) for this and make an internal name/id that is not seen nor edited by the user, but let&#x27;s keep it simple on the demo.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="building-playbooks-and-templates">Building Playbooks and templates<a aria-hidden="true" class="hash-link" href="#building-playbooks-and-templates" title="Direct link to heading">â€‹</a></h2><p>We will organize our playbooks in a way that we can run commands on equipment depending on its Operating System/type. You could do something more structured using templates, correct ansible modules for each command block (e.g.: acl, interface config, etc.) and also use roles functions separated by OS/type, but I think that a more simple approach is better for maintenance and make you less dependent on ansible and its own organization itself. A point to remember is that, since every change on infrastructure will be made through an API that has strong data constraints, data is already more validated than if we called ansible directly or modifying it via gitlab.</p><p>For each type of OS we will have 1 playbook (e.g.: ios_playbook.yml) and 1 template. They will be responsible to convert (a.k.a. parse) our structured JSON data received as variable to commands that needs to be executed on equipment. Since ACLs commands are complex to parse, we&#x27;ll be using a template to convert it. It receives our ACLs entry and converts it to CLI commands. You could also use something like <a href="https://vincent.bernat.ch/en/blog/2021-network-jerikan-ansible" target="_blank" rel="noopener noreferrer">Jerikan</a> on the gitlab CI and deliver your data already parsed to ansible so it only executes an action plan instead of parsing.</p><p>We will also have a &quot;parent&quot; playbook that simply point to the correct OS playbook depending on &quot;ansible_network_os&quot; variable and use &quot;import_playbook&quot; to import the correct os playbook and a dumb start.yml playbook that only register &quot;ansible_network_os&quot; variable to use on &quot;import_playbook&quot; since we can&#x27;t access ansible_network_os before import_playbook. These 2 playbooks are the one that we will create job templates on AWX. We will create a workflow template to link these two playbooks.</p><p>In this demo we&#x27;ll only construct an IOS playbook (also runs on IOS XE), but the concept is the same for any OS. Once the workflow and these 2 job templates are created on AWX, to add support to other OSes, all you need to do is to add specific OS playbooks/templates to gitlab repo.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>AWX latest versions have changed a lot from some previous one. Now, playbooks are run on a AWX &quot;Execution Environment&quot; (EE) that basically is a custom container image containing commands and python modules needed. Fortunately, AWX already has a default EE with some modules. Sadly, the default EE doesn&#x27;t have netaddr python module needed to make some complex network operations more simple (eg.: creating wildcard mask from a normal mask), so we added a &quot;pip install netaddr&quot; as the first task on our playbook and delegated it to localhost.</p><p>In a production scenario you should consider building your own EE image with the netaddr module. Or maybe, when/if you build your production environment some guy on AWX EE github repo recognize this problem and accept a pull request inserting this module by default. See <a href="https://github.com/ansible/awx-ee/issues/90" target="_blank" rel="noopener noreferrer">this issue</a></p></div></div><p><code>ios_playbook.yml</code> example - only modifying the first interface from the JSON file submitted:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: Create ACLs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hosts: &#x27;{{ site_id }}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gather_facts: no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tasks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - name: Main Block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    block:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: pip install netaddr (really disagree how red hat manage their products...). Either I do this or create a custom Execution Enviroment....</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ansible.builtin.shell: pip install netaddr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delegate_to: 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Parsing in and out ACEs and setting fact</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ansible.builtin.set_fact:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          in_aces: &quot;{{ lookup(&#x27;template&#x27;, &#x27;./ios_template.j2&#x27;, template_vars=dict(aces=lan_interfaces[0].in_acl)).splitlines() }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          out_aces: &quot;{{ lookup(&#x27;template&#x27;, &#x27;./ios_template.j2&#x27;, template_vars=dict(aces=lan_interfaces[0].out_acl)).splitlines() }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delegate_to: localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Get running config interface section</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cisco.ios.ios_command:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - show running-config | sec interface {{ lan_interfaces[0].interface_name }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        register: acl_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Get ACL IN Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ansible.builtin.set_fact:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          in_acl: &quot;{{ acl_name.stdout_lines[0] | select(&#x27;match&#x27;, &#x27;^\\s*ip\\s+access-group\\s+(.*)in&#x27;) | map(&#x27;regex_replace&#x27;, &#x27;^\\s*ip\\s+access-group\\s+(.*)\\s+in.*$&#x27;,&#x27;\\1&#x27;) }}&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          #this regex will capture the ACL name (a string between word &#x27;access-group&#x27; and word &#x27;in&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Get ACL OUT Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ansible.builtin.set_fact:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          out_acl: &quot;{{ acl_name.stdout_lines[0] | select(&#x27;match&#x27;, &#x27;^\\s*ip\\s+access-group\\s+(.*)out&#x27;) | map(&#x27;regex_replace&#x27;, &#x27;^\\s*ip\\s+access-group\\s+(.*)\\s+out.*$&#x27;,&#x27;\\1&#x27;) }}&quot; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      #To get ansible_date_time and epoch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - setup:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          gather_subset:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - min</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      #- debug:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      #    var: vars</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      #To get ansible_date_time and epoch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Creating IN ACL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cisco.ios.ios_config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          lines:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;{{ in_aces }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          parents: &quot;ip access-list extended wan_site_{{ ansible_date_time.epoch }}_in&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Creating OUT ACL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cisco.ios.ios_config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          lines:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;{{ in_aces }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          parents: &quot;ip access-list extended wan_site_{{ ansible_date_time.epoch }}_out&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Attaching ACL to interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cisco.ios.ios_config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          lines:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;ip access-group wan_site_{{ ansible_date_time.epoch }}_in in&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;ip access-group wan_site_{{ ansible_date_time.epoch }}_out out&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          parents: &quot;interface {{ lan_interfaces[0].interface_name }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Deleting old IN ACL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cisco.ios.ios_config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          lines:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;no ip access-list extended {{ in_acl[0] }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        when: in_acl[0] is defined and in_acl[0] | length &gt; 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - name: Deleting old OUT ACL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cisco.ios.ios_config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          lines:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - &quot;no ip access-list extended {{ out_acl[0] }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        when: out_acl[0] is defined and out_acl[0] | length &gt; 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    when: lan_interfaces[0].in_acl is defined and lan_interfaces[0].in_acl | length &gt; 0 and lan_interfaces[0].out_acl is defined and lan_interfaces[0].out_acl | length &gt; 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: Setting other changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hosts: &#x27;{{ site_id }}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gather_facts: no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tasks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: Parsing &quot;IP/Mask&quot; to &quot;IP Mask (dot decimal formation)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      set_fact:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ip_mask: &quot;{{ lan_interfaces[0].ip_address | ansible.netcommon.ipaddr(&#x27;address&#x27;) }} {{ lan_interfaces[0].ip_address | ansible.netcommon.ipaddr(&#x27;netmask&#x27;) }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      delegate_to: localhost</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      when: lan_interfaces[0].ip_address is defined and lan_interfaces[0].ip_address | length &gt; 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: Changing IP address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cisco.ios.ios_config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lines:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - &quot;ip address {{ ip_mask }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parents: &quot;interface {{ lan_interfaces[0].interface_name }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      when: lan_interfaces[0].ip_address is defined and lan_interfaces[0].ip_address | length &gt; 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: Changing Description</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cisco.ios.ios_config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lines:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - &quot;description {{ lan_interfaces[0].description }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parents: &quot;interface {{ lan_interfaces[0].interface_name }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      when: lan_interfaces[0].description is defined and lan_interfaces[0].description | length &gt; 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: Changing Helper Address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cisco.ios.ios_config:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lines:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - &quot;ip helper-address {{ lan_interfaces[0].helper_address }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        parents: &quot;interface {{ lan_interfaces[0].interface_name }}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      when: lan_interfaces[0].helper_address is defined and lan_interfaces[0].helper_address | length &gt; 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>ios_template.j2</code> example that will convert our ACLs JSON to IOS commands:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI YAML"><pre tabindex="0" class="prism-code language-YAML codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#jinja2:lstrip_blocks: True</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% for item in aces %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {#Check if source or dst IP address are IP/MASK or &#x27;any&#x27; and set wildcard mask#}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- if item.src != &#x27;any&#x27; -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {%- set src_wildcard = item.src | ansible.netcommon.ipaddr(&#x27;wildcard&#x27;) -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- endif -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- if item.dst != &#x27;any&#x27; -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {%- set dst_wildcard = item.dst | ansible.netcommon.ipaddr(&#x27;wildcard&#x27;) -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- endif -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {##################}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {#Make initial statement (e.g.: &quot;permit ip&quot;)#}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {{- item.action }}{{ &#x27; &#x27; + item.protocol -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {##################}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {#Setting src address (e.g.: &quot;any&quot; or &quot;192.168.254.0 0.0.0.255&quot;)#}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- if item.src == &#x27;any&#x27; -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {{- &#x27; &#x27; + item.src -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- else -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {{- &#x27; &#x27; + item.src | ansible.netcommon.ipaddr(&#x27;network&#x27;) }}{{ &#x27; &#x27; + src_wildcard -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- endif -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {##################}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {#Setting dst address (e.g.: &quot;any&quot; or &quot;192.168.254.0 0.0.0.255&quot;)#}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- if item.dst == &#x27;any&#x27; -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {{- &#x27; &#x27; + item.dst -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- else -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {{- &#x27; &#x27; + item.dst | ansible.netcommon.ipaddr(&#x27;network&#x27;) }}{{ &#x27; &#x27; + dst_wildcard -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- endif -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {##################}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {#Setting dst port (e.g.: &quot;123&quot; or &quot;range 1 123&quot;). If port contains &quot;-&quot; char its a range#}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- if &#x27;-&#x27; in item.port -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {% set range_initial_port, range_final_port = item.port.split(&#x27;-&#x27;) %}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {{- &#x27; range &#x27; + range_initial_port + &#x27; &#x27; + range_final_port -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- else -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {%- if item.protocol == &#x27;udp&#x27; or item.protocol == &#x27;tcp&#x27; -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {{- &#x27; eq &#x27; + item.port -}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {%- endif -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {%- endif -%}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {{ &#x27; &#x27; }}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{% endfor %}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="storing-playbooks-templates-and-inventories">Storing playbooks, templates and inventories<a aria-hidden="true" class="hash-link" href="#storing-playbooks-templates-and-inventories" title="Direct link to heading">â€‹</a></h2><p>As stated before, we&#x27;ll use gitlab to store our ansible files and use it as a source for the AWX project. AWX will query the gitlab repo and update its files (playbooks, inventories, etc.) on demand (or automatically if configured in this way). Also, please note that since this data (playbooks, inventories) have different objectives and requirements from our structured data created in the previous section you should use a separate gitlab or at least use specific permissions to allow only AWX to read this repo (not modify!) and only enable write permissions on an on-demand basis to admins/operators (eg.: update a playbook).</p><p>If you have a big automation team or several teams with different roles on IT automation you could have different gitlab repositories with different playbooks, inventories, templates, etc. and each of them only reading/modifying files on their repos. This way you minimize the permission requirements and divide risks.</p><p>You can create the repo and submit all files on gitlab using the web interface or git, or you can use the script on the full-stack automation repo (<a href="https://github.com/liviozanol/full-stack-automation" target="_blank" rel="noopener noreferrer">https://github.com/liviozanol/full-stack-automation</a>) and execute the main AWX demo script (sudo /bin/bash ./demo/awx/import_files_on_gitlab.sh)</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="configuring-awx-to-use-inventory-playbook-and-template">Configuring AWX to use inventory, playbook and template<a aria-hidden="true" class="hash-link" href="#configuring-awx-to-use-inventory-playbook-and-template" title="Direct link to heading">â€‹</a></h2><p>Now, since ansible files are on gitlab we need to configure AWX to integrate with gitlab to get the files and also create our inventory and job templates that will run our playbook (<a href="https://docs.ansible.com/ansible-tower/latest/html/userguide/job_templates.html" target="_blank" rel="noopener noreferrer">AWX job template</a> is where we link AWX to our playbook). We will also create a workflow to run our playbook because of a Ansible &quot;limitation&quot; on how to manipulate variables on &#x27;import_playbook&#x27; directive.</p><p>You can do this using AWX web UI, but the <a href="https://github.com/liviozanol/full-stack_automation/blob/master/demo/awx/configure_awx.sh" target="_blank" rel="noopener noreferrer">script</a> will use AWX API, and will make the following tasks:</p><ul><li>Create a SCM credential (a gitlab deploy token) to allow AWX to login to gitlab.</li><li>Create an AWX project using our gitlab repository.</li><li>Create an inventory using our gitlab repo as a source.</li><li>Create one job template for the playbook that simply gets the network os name from inventory and stores on a variable accessible by other tasks on a workflow.</li><li>Create one job template for the playbook that implements the changes on our router (the main one that &#x27;imports&#x27; the real playbook).</li><li>Create a job workflow to link our 2 tasks and link the 2 tasks (these are 4 APIs calls).</li></ul><p>AWX final structure shown on its web UI
<img alt="AWX final structure shown on its web UI" src="/assets/images/awx-22a93ce3c67f2dd7f55a7ca2e5a5fd4c.gif"></p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/automation">automation</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/awx">awx</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/ansible">ansible</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/gitlab">gitlab</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/network-automation">network automation</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/gitlab-ci">gitlab-ci</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/ci-cd">CI/CD</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/gitops">gitops</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/liviozanol/liviozanol.github.io/blog/2022-01-10-automation-7/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/full-stack-it-automation-part-8-demo-gitlab-runner"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« <!-- -->Full-Stack Automation Part 8 - Demo - Runner</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/full-stack-it-automation-part-6-demo-scenario"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Full-Stack Automation Part 6 - Demo -Scenario<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#creating-playbooks-and-complements" class="table-of-contents__link toc-highlight">Creating Playbooks and complements</a></li><li><a href="#inventory" class="table-of-contents__link toc-highlight">Inventory</a></li><li><a href="#building-playbooks-and-templates" class="table-of-contents__link toc-highlight">Building Playbooks and templates</a></li><li><a href="#storing-playbooks-templates-and-inventories" class="table-of-contents__link toc-highlight">Storing playbooks, templates and inventories</a></li><li><a href="#configuring-awx-to-use-inventory-playbook-and-template" class="table-of-contents__link toc-highlight">Configuring AWX to use inventory, playbook and template</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Livio Zanol Puppim (livio@zanol.com.br). Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.df9db110.js"></script>
<script src="/assets/js/main.c157b536.js"></script>
</body>
</html>