<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Livio&#39;s Dump RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Livio&#39;s Dump Atom Feed"><title data-react-helmet="true">Full-Stack Automation Part 10 - Demo - UI | Livio&#x27;s Dump</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://livio.zanol.com.br/full-stack-it-automation-part-10-demo-ui"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Full-Stack Automation Part 10 - Demo - UI | Livio&#x27;s Dump"><meta data-react-helmet="true" name="description" content="Web Interface"><meta data-react-helmet="true" property="og:description" content="Web Interface"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2022-02-05T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/liviozanol"><meta data-react-helmet="true" property="article:tag" content="automation,awx,ansible,gitlab,network automation,gitlab-ci,CI/CD,gitops,react admin"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://livio.zanol.com.br/full-stack-it-automation-part-10-demo-ui"><link data-react-helmet="true" rel="alternate" href="https://livio.zanol.com.br/full-stack-it-automation-part-10-demo-ui" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://livio.zanol.com.br/full-stack-it-automation-part-10-demo-ui" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.72c6fd0a.css">
<link rel="preload" href="/assets/js/runtime~main.df9db110.js" as="script">
<link rel="preload" href="/assets/js/main.9605fe9c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/lzp-small.svg" alt="Logo" class="themedImage_TMUO themedImage--light_4Vu1" height="32" width="32"><img src="/img/lzp-small.svg" alt="Logo" class="themedImage_TMUO themedImage--dark_uzRr" height="32" width="32"></div><b class="navbar__title">Livio&#x27;s Dump</b></a><a href="https://github.com/liviozanol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="mailto:livio@zanol.com.br" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>E-mail: livio@zanol.com.br<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">All posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a aria-current="page" class="sidebarItemLink_zyXk sidebarItemLinkActive_wcJs" href="/full-stack-it-automation-part-10-demo-ui">Full-Stack Automation Part 10 - Demo - UI</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-9-demo-api">Full-Stack Automation Part 9 - Demo - API</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-8-demo-gitlab-runner">Full-Stack Automation Part 8 - Demo - Runner</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-7-demo-awx">Full-Stack Automation Part 7 - Demo - AWX</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-6-demo-scenario">Full-Stack Automation Part 6 - Demo -Scenario</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-5-gitlabci">Full-Stack Automation Part 5 - Gitlab CI</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-4-awx">Full-Stack Automation Part 4 - AWX</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-3-Vault">Full-Stack Automation Part 3 - Vault</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-2-gitlab">Full-Stack Automation Part 2 - Gitlab</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/full-stack-it-automation-part-1">Full-Stack Automation Part 1 - Overview</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/first">First Post</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Full-Stack Automation Part 10 - Demo - UI</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-02-05T00:00:00.000Z" itemprop="datePublished">February 5, 2022</time> Â· <!-- -->6 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://github.com/liviozanol" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://github.com/liviozanol.png" alt="LÃ­vio Zanol Puppim"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/liviozanol" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">LÃ­vio Zanol Puppim</span></a></div><small class="avatar__subtitle" itemprop="description">Me</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="web-interface">Web Interface<a aria-hidden="true" class="hash-link" href="#web-interface" title="Direct link to heading">â€‹</a></h2><p>In this section we will build our web interface. Users can use it to get and update info from their WAN sites in a friendly interface. Note that using web interface is not mandatory. In fact, the web page will only convert data to/from API to show on a page, but users still request our API directly and can use it to make its changes. In some aspect this is good, since you give option to users to use any other tool to interact with our solution. They can use for example <a href="https://www.postman.com" target="_blank" rel="noopener noreferrer">postman</a>, <a href="https://curl.se" target="_blank" rel="noopener noreferrer">curl</a>, ansible, terraform, or even building its own web interface if they want to.</p><p>Will be used <a href="https://marmelab.com/react-admin" target="_blank" rel="noopener noreferrer">react admin</a> as framework to build our UI. Their community version is very complete and allow us to build our pages (if they are basic ones) pretty easy. The Tutorial and Manual are very complete, and if want to deep dive in it go check it out.</p><p>React admin is a framework built in <a href="https://pt-br.reactjs.org" target="_blank" rel="noopener noreferrer">React</a> that lets you build a complete admin dashboard for almost anything using react and Javascript/Typescript (you can also use other <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">NPM</a> modules). It integrates with APIs pretty simple and also have a lot of pre-built fields/functions that makes the job of building dashboards much more simple. As UI components, it uses the great <a href="https://mui.com/" target="_blank" rel="noopener noreferrer">Material UI</a> providing a great visual experience.</p><p>It&#x27;s not part of this post to explain how Javascript/Typescript, NPM or React works as this is a whole world for itself. If want you can learn more about them somewhere else on Internet.</p><p>As always, all files generated on this section (and on previous) are on full-stack automation github repo (<a href="https://github.com/liviozanol/full-stack-automation" target="_blank" rel="noopener noreferrer">https://github.com/liviozanol/full-stack-automation</a>), so you don&#x27;t need to create it yourself again.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Please note that I&#x27;m not a developer. You shouldn&#x27;t trust my code blindly (in fact, any code). But feel free to use it, change it and send me angry feedbacks and comments.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="coding-the-interface">Coding the interface<a aria-hidden="true" class="hash-link" href="#coding-the-interface" title="Direct link to heading">â€‹</a></h2><p>To build our simple web interface using React Admin we need basically these things:</p><ul><li>A file with our <a href="https://marmelab.com/react-admin/Authentication.html" target="_blank" rel="noopener noreferrer">Auth provider</a> that will receive username/pass as input and validate user permission on the API. Will be named <code>authProvider.js</code></li><li>A file with our <a href="https://marmelab.com/react-admin/DataProviders.html" target="_blank" rel="noopener noreferrer">Data provider</a> that will query our API and transform the JSON response from it to a format compatible with react admin. If needed, you can also convert data from react admin format to a format understood by the API before you send to the API (we have done this). Will be named <code>dataProvider.ts</code></li><li>A file with our Wan Sites functions that will basically have 2 main exported functions: 1 with a <a href="https://marmelab.com/react-admin/List.html" target="_blank" rel="noopener noreferrer">List</a> of Wan Sites and 1 with the <a href="https://marmelab.com/react-admin/CreateEdit.html" target="_blank" rel="noopener noreferrer">Edit(Update)</a> view that user will use to edit a Wan Site configuration. We also added react admin simple form validation for each field on the Edit view so user can have a better experience, but this is not required since our API <em>must</em> validate the data also. This file will be named <code>wanSite.js</code></li><li>The <code>App.js</code> file that will put everything together and make the react admin app available to the user.</li></ul><p>On the demo we will use async site update. Once the user submits a change, after validation, data is updated on gitlab and user can make other tasks. So, we need a way to show users if their submitted changes have been implemented on equipment or not and we will create another file for this: <code>jobList.js</code>. This file is a custom React file that shows a table of the last 5 jobs submitted by users and its status. It will be used as an <a href="https://marmelab.com/react-admin/CreateEdit.html#aside-component" target="_blank" rel="noopener noreferrer">Aside Component</a> on the Edit View that will be shown on the right side of this page to the user.</p><p>If you follow <a href="https://marmelab.com/react-admin/Tutorial.html" target="_blank" rel="noopener noreferrer">react admin tutorial</a> after you create your react app, edit App.js to import authProvider, dataProvider and wanSite, obviously create these files (and jobList), make the ajustment on resources and authprovider on App.js and that&#x27;s it. You can run your app (<code>yarn start</code> or <code>npm run start</code>) to see it working. If you have access to the API from the computer where you are running the react admin interface you can start to use the app. Login with &quot;client_a_user&quot; (user/pass), &quot;client_b_user&quot;(user/pass) and &quot;admin&quot; (user/pass) to see the differences.</p><p>If you look at the source codes of the <a href="https://github.com/liviozanol/full-stack_automation/tree/master/demo/fullstack-ui/src" target="_blank" rel="noopener noreferrer">files</a> you will see that coding basic things using react admin is pretty simple and the documentation and examples help a lot. But as you start to customize elements, things can get very complicated. If you take a look at <code>jobList.js</code> that is pratically a custom built element using very few react admin elements, you will see how messy things can become. Either way, React Admin always tries to make things simpler to you and sure is much more easier than build your own admin dashboard from scracth.</p><p>UI demonstration after wall is installed and configured
<img alt="UI demonstration after wall is installed and configured" src="/assets/images/UI-02e4ae8364f73dcacc1172f2c80975d5.gif"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="publishing-our-webpage">Publishing our webpage<a aria-hidden="true" class="hash-link" href="#publishing-our-webpage" title="Direct link to heading">â€‹</a></h2><p>Just like our API, everything will be auto deployed by our gitlab runner using a CI/CD pipeline.</p><p>We will again use the same gitlab runner that calls AWX. On a production environment, the UI and API runner should be separated.</p><p>Since we will be using React Admin for our UI, we will use <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">NPM</a> to build and install our App. Our repo will contain a <code>packages.json</code> file that is read by npm and installs the required packages and its dependencies. The output from this build are simple HTML, CSS and JS files that you can even run on your local computer. The CI/CD pipeline will just get these files, and build a simple nginx docker image with then inside, publishing our app just like any simple simple HTML/JS application.</p><p>Will be created 1 repository for our react admin source files and packages.json. Gitlab runner will watch this repo and update our UI container everytime we modify it.</p><p>Again, our CI/CD pipeline will be VERY simple, without even testing our application before deploy. Please note that adding more stages with some good tests, validation, approval is very recommended. For simplicity, the update process will be disruptive (stop old containers and running new ones). On production environment, obviously, you should make something more suitable for your needs.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The installation/configuration script will try to guess which IP address is the pyshical IP and change App.js to use it as a dataprovider. If its wrong, you can just update App.js file with the correct IP, either using git operations or gitlab web UI.</p></div></div></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/automation">automation</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/awx">awx</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/ansible">ansible</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/gitlab">gitlab</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/network-automation">network automation</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/gitlab-ci">gitlab-ci</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/ci-cd">CI/CD</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/gitops">gitops</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/react-admin">react admin</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/liviozanol/liviozanol.github.io/blog/2022-02-05-automation-10/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/full-stack-it-automation-part-9-demo-api"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Full-Stack Automation Part 9 - Demo - API<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#web-interface" class="table-of-contents__link toc-highlight">Web Interface</a></li><li><a href="#coding-the-interface" class="table-of-contents__link toc-highlight">Coding the interface</a></li><li><a href="#publishing-our-webpage" class="table-of-contents__link toc-highlight">Publishing our webpage</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Livio Zanol Puppim (livio@zanol.com.br). Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.df9db110.js"></script>
<script src="/assets/js/main.9605fe9c.js"></script>
</body>
</html>